<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<!--
  ~ Copyright (c) 2024. Hyster-Yale Group
  ~ All rights reserved.
  -->

<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd">

   <changeSet id="create-table-import_failure" author="songiang">
       <createTable tableName="import_failure">
           <column name="id" type="int">
               <constraints primaryKey="true"/>
           </column>
           <column type="varchar(255)" name="file_name"/>
           <column type="varchar(255)" name="primary_key"/>
           <column type="varchar(500)" name="reason"/>
       </createTable>
   </changeSet>

    <changeSet id="addColumn-type" author="songiang">
        <addColumn tableName="import_failure">
            <column name="type" type="varchar(255)"/>
        </addColumn>
    </changeSet>

    <changeSet id="rename-column-reason" author="songiang">
        <renameColumn tableName="import_failure" oldColumnName="reason" newColumnName="reason_key"/>
    </changeSet>

    <changeSet id="addColumn-message-value" author="songiang">
        <addColumn tableName="import_failure">
            <column name="reason_value" type="varchar(255)"/>
        </addColumn>
    </changeSet>

    <changeSet id="renameColumn" author="songiang">
        <renameColumn tableName="import_failure" oldColumnName="file_name" newColumnName="file_uuid"/>
    </changeSet>

</databaseChangeLog>
